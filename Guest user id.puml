@startuml
title Guest User ID Generation Flow

actor Customer
participant Nextjs #abcaff
participant "www" #abcaff
participant "Cookie" as Cookie #yellow

autonumber

Customer -> Nextjs: Visit page
note right of Cookie
  Stored in browser, accessible to both FE and BE
end note
Nextjs -> Cookie: Get guest user id
Cookie --> Nextjs: Response
alt Guest user id is **empty**
    Nextjs -> www: GET /system/visitor-analysis
    www -> Cookie: Get guest user id
    Cookie --> www: Response
    www --> Nextjs: Response guest user id
    Nextjs -> Nextjs: Continue subsequent operations
else
    Nextjs -> Nextjs: Use cookie and continue subsequent operations
end


@enduml
