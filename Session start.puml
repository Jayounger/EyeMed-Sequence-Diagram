@startuml
'https://plantuml.com/activity-diagram-beta

start
:Get the session status from redis;
if (The redis value is empty?) then (true)
  :Get the last session log;
  if (The session log is not empty?) then (true)

      if (The session log is expired?) then (true)
          :Send the session end request;
      else (false)
      endif
  else (false)
  endif
      :Send the session start request;
else (false)
endif
:Set the cache of the session to expire after 30 minutes;
:Insert a visit log;
stop
@enduml
